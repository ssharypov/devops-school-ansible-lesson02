---
- name: Lesson 02, Users Creation
  hosts: node1.example.com
  become: yes
  gather_facts: yes

  tasks:
  - name: Add users
    user:
     name: "{{item.name}}"
     comment: "{{item.name}}@example.com"
     create_home: true
     home: "/home/{{item.name}}_home"
     state: present
     system: yes
     password: "{{item.pass | string | password_hash('sha512')}}"
    loop:
     - name: Alice
       pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32343930623633666563663561306566383930326164366135623161653432303462373931323162
          3831303564663934633732656231383265346165373966650a653262643662333630343434386162
          33386362396662323864613434616163303466663865643938356365366131353832663137393461
          6633383262613836310a343432636166616564623738663365656132653865396566363863656332
          6535
     - name: Bob
       pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30366665373830663136393664333962616332346665323839346664303465373161363139363633
          6231383437613338623332323133346262666233643662630a306363653739366238616230353661
          31643563393366653964613234336638346563356564333434616431356433656438623364346461
          6666303666323435660a336263323235613732623331663263643866326138353961306135343939
          6232
     - name: Carol
       pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62306337373339666136366435633764316633636637353863303830306362663763636432353434
          3261373931313036656631376462343663306566303530330a613833663737366137316330303631
          38626161323263363539303763363538343264393834306264356565663938323361613864396163
          3530643330633564620a623462623130313732366437323930623735373265366536623432353136
          6636
